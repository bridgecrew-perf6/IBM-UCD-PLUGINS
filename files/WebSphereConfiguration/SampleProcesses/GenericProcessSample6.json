{
    "name": "WebSphere - Example 6 - Discover & Templatize Cluster Configuration Data Only (No Multiplicity)",
    "description": "Sample process to pull Cluster configuration data from a WAS instance and turn that data into templates.",
    "rootActivity": {
        "edges": [
            {
                "to": "Trim property whitespaces",
                "from": "WebSphere - Templatize Server 2 Configuration Data",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Create Cluster Member 2 component version",
                "from": "Create Cluster Member 1 component version",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Create Server Component for cluster member 1",
                "from": "Check If Server Component for cluster member 1 exists",
                "type": "FAILURE",
                "value": ""
            },
            {
                "to": "Create Cluster Config component version",
                "from": "GetInfo",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "WebSphere - Templatize Server Configuration Data",
                "from": "WebSphere - Templatize Cluster Configuration Data",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Check If Server Component for cluster member 1 exists",
                "from": "Trim property whitespaces",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Check If Server Component for cluster member 2 exists",
                "from": "Check If Server Component for cluster member 1 exists",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Create Cluster Member 1 component version",
                "from": "Create Cluster Config component version",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Discover Server Config Data for Cluster Member 1",
                "from": "Discover Cluster Config Data",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Create Server Component for cluster member 2",
                "from": "Check If Server Component for cluster member 2 exists",
                "type": "FAILURE",
                "value": ""
            },
            {
                "to": "WebSphere - Templatize Server 2 Configuration Data",
                "from": "WebSphere - Templatize Server Configuration Data",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Discover Server Config Data for Cluster Member 2",
                "from": "Discover Server Config Data for Cluster Member 1",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "07622394f0b4f9fc7e999397f14afe",
                "from": "Create Cluster Member 2 component version",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "WebSphere - Templatize Cluster Configuration Data",
                "from": "Discover Server Config Data for Cluster Member 2",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "GetInfo",
                "from": "Create Server Component for cluster member 2",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Discover Cluster Config Data",
                "from": "Clean working directory",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Clean working directory",
                "type": "ALWAYS",
                "value": ""
            },
            {
                "to": "GetInfo",
                "from": "Check If Server Component for cluster member 2 exists",
                "type": "SUCCESS",
                "value": ""
            },
            {
                "to": "Check If Server Component for cluster member 2 exists",
                "from": "Create Server Component for cluster member 1",
                "type": "SUCCESS",
                "value": ""
            }
        ],
        "offsets": [
            {
                "name": "Discover Server Config Data for Cluster Member 1",
                "x": -250,
                "y": 290,
                "h": 50,
                "w": 580
            },
            {
                "name": "WebSphere - Templatize Cluster Configuration Data",
                "x": -295,
                "y": 450,
                "h": 50,
                "w": 670
            },
            {
                "name": "WebSphere - Templatize Server Configuration Data",
                "x": -295,
                "y": 550,
                "h": 50,
                "w": 670
            },
            {
                "name": "Create Cluster Member 2 component version",
                "x": -180,
                "y": 1519.3333333333335,
                "h": 50,
                "w": 440
            },
            {
                "name": "Discover Cluster Config Data",
                "x": -245,
                "y": 202.66666666666669,
                "h": 50,
                "w": 570
            },
            {
                "name": "07622394f0b4f9fc7e999397f14afe",
                "x": -5,
                "y": 1640,
                "h": 50,
                "w": 90
            },
            {
                "name": "Create Server Component for cluster member 1",
                "x": -508,
                "y": 900.3333333333333,
                "h": 50,
                "w": 470
            },
            {
                "name": "Clean working directory",
                "x": -155,
                "y": 110,
                "h": 50,
                "w": 390
            },
            {
                "name": "Check If Server Component for cluster member 1 exists",
                "x": -240,
                "y": 800,
                "h": 50,
                "w": 560
            },
            {
                "name": "Discover Server Config Data for Cluster Member 2",
                "x": -250,
                "y": 370,
                "h": 50,
                "w": 580
            },
            {
                "name": "Create Server Component for cluster member 2",
                "x": -508,
                "y": 1090,
                "h": 50,
                "w": 470
            },
            {
                "name": "Check If Server Component for cluster member 2 exists",
                "x": -240,
                "y": 1009.3333333333333,
                "h": 50,
                "w": 560
            },
            {
                "name": "Trim property whitespaces",
                "x": -135,
                "y": 730,
                "h": 50,
                "w": 350
            },
            {
                "name": "GetInfo",
                "x": -85,
                "y": 1200,
                "h": 50,
                "w": 250
            },
            {
                "name": "Create Cluster Config component version",
                "x": -170,
                "y": 1300,
                "h": 50,
                "w": 420
            },
            {
                "name": "WebSphere - Templatize Server 2 Configuration Data",
                "x": -299.99999999999994,
                "y": 640,
                "h": 50,
                "w": 680
            },
            {
                "name": "Create Cluster Member 1 component version",
                "x": -180,
                "y": 1395,
                "h": 50,
                "w": 440
            }
        ],
        "type": "graph",
        "name": "67fe87f4-39ee-446d-8a16-94c5245901f7",
        "children": [
            {
                "type": "finish",
                "name": "07622394f0b4f9fc7e999397f14afe",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": true,
                "impersonationUseSudo": false,
                "commandName": "WebSphere Configuration Discovery",
                "pluginName": "WAS - Configure",
                "pluginVersion": 22,
                "properties": {
                    "profilePath": "${p?:resource\/websphere.profilePath}",
                    "commandPath": "${p?:resource\/websphere.commandPath}",
                    "wasuser": "${p?:resource\/websphere.user}",
                    "waspassword": "${p?:resource\/websphere.password}",
                    "host": "${p?:resource\/websphere.host}",
                    "port": "${p?:resource\/websphere.port}",
                    "connType": "SOAP",
                    "resourcePath": "${p?:resource.path}",
                    "configurationTypes": "${p?:websphere.cell.configurationtypes}",
                    "configurationFile": "${p?:websphere.cell.configurationfile}",
                    "configurationOutputFile": "${p:clusterConfigFile}",
                    "wasAdminMaxHeap": "-Xmx1024m",
                    "logLevel": "3"
                },
                "type": "plugin",
                "name": "Discover Cluster Config Data",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": true,
                "impersonationUseSudo": false,
                "commandName": "WebSphere Configuration Discovery",
                "pluginName": "WAS - Configure",
                "pluginVersion": 22,
                "properties": {
                    "profilePath": "${p?:resource\/websphere.profilePath}",
                    "commandPath": "${p?:resource\/websphere.commandPath}",
                    "wasuser": "${p?:resource\/websphere.user}",
                    "waspassword": "${p?:resource\/websphere.password}",
                    "host": "${p?:resource\/websphere.host}",
                    "port": "${p?:resource\/websphere.port}",
                    "connType": "SOAP",
                    "resourcePath": "${p:server1ResourcePath}",
                    "configurationTypes": "${p?:websphere.cell.configurationtypes}",
                    "configurationFile": "${p?:websphere.cell.configurationfile}",
                    "configurationOutputFile": "${p:server1ConfigFile}",
                    "wasAdminMaxHeap": "-Xmx1024m",
                    "logLevel": "3"
                },
                "type": "plugin",
                "name": "Discover Server Config Data for Cluster Member 1",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "Run Groovy Script",
                "pluginName": "Groovy",
                "pluginVersion": 6,
                "properties": {
                    "groovyHome": "${GROOVY_HOME}",
                    "scriptBody": "import java.text.SimpleDateFormat\n\n\/\/ Get date and time\ndef today = new Date()\ndef formattedDateTime = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\").format(today)\noutProps.put(\"datetime\",formattedDateTime)\n\n\/\/ Get absolute path to outputDirectory\noutputDirString = \"${p:outputDirString}\"\noutputDirString = outputDirString.trim()\noutputDirAbs = new File(outputDirString).getAbsolutePath()\noutProps.put(\"outputDirAbs\", outputDirAbs)\n\n\/\/ Get absolute path to outputDirServer1\noutputDirServer1String = \"${p:outputDirServer1}\"\noutputDirServer1String = outputDirServer1String.trim()\noutputDirServer1Abs = new File(outputDirServer1String).getAbsolutePath()\noutProps.put(\"outputDirServer1Abs\", outputDirServer1Abs)\n\n\/\/ Get absolute path to outputDirServer2\noutputDirServer2String = \"${p:outputDirServer2}\"\noutputDirServer2String = outputDirServer2String.trim()\noutputDirServer2Abs = new File(outputDirServer2String).getAbsolutePath()\noutProps.put(\"outputDirServer2Abs\", outputDirServer2Abs)"
                },
                "type": "plugin",
                "name": "GetInfo",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "workingDir": "${p:GetInfo\/outputDirAbs}",
                "commandName": "Create Version",
                "pluginName": "UrbanCode Deploy Versions",
                "pluginVersion": 66,
                "properties": {
                    "componentName": "Cluster Config - No Multiplicity",
                    "versionName": "${p:GetInfo\/datetime}",
                    "uploadFiles": "true",
                    "includes": "**\/*",
                    "excludes": "",
                    "saveFileExecuteBits": "false"
                },
                "type": "plugin",
                "name": "Create Cluster Config component version",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "Delete Files and Directories",
                "pluginName": "File Utils",
                "pluginVersion": 41,
                "properties": {
                    "baseDir": ".",
                    "includes": "**\/*\n*",
                    "excludes": "",
                    "followSymlinks": "false",
                    "caseSensitive": "true"
                },
                "type": "plugin",
                "name": "Clean working directory",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": true,
                "impersonationUseSudo": false,
                "commandName": "WebSphere Configuration Discovery",
                "pluginName": "WAS - Configure",
                "pluginVersion": 22,
                "properties": {
                    "profilePath": "${p?:resource\/websphere.profilePath}",
                    "commandPath": "${p?:resource\/websphere.commandPath}",
                    "wasuser": "${p?:resource\/websphere.user}",
                    "waspassword": "${p?:resource\/websphere.password}",
                    "host": "${p?:resource\/websphere.host}",
                    "port": "${p?:resource\/websphere.port}",
                    "connType": "SOAP",
                    "resourcePath": "${p:server2ResourcePath}",
                    "configurationTypes": "${p?:websphere.cell.configurationtypes}",
                    "configurationFile": "${p?:websphere.cell.configurationfile}",
                    "configurationOutputFile": "${p:server2ConfigFile}",
                    "wasAdminMaxHeap": "-Xmx1024m",
                    "logLevel": "3"
                },
                "type": "plugin",
                "name": "Discover Server Config Data for Cluster Member 2",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "Check If Component Exists",
                "pluginName": "UrbanCode Deploy Components",
                "pluginVersion": 72,
                "properties": {"component": "Server - ${p:Trim property whitespaces\/server1Name}"},
                "type": "plugin",
                "name": "Check If Server Component for cluster member 1 exists",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "Run Groovy Script",
                "pluginName": "Groovy",
                "pluginVersion": 6,
                "properties": {
                    "groovyHome": "${GROOVY_HOME}",
                    "scriptBody": "def nodeName = \"${p:nodeName}\"\ndef clusterName = \"${p:clusterName}\"\ndef server1Name = \"${p:server1Name}\"\ndef server2Name = \"${p:server2Name}\"\n\noutProps.put(\"nodeName\", nodeName.trim())\noutProps.put(\"clusterName\", clusterName.trim())\noutProps.put(\"server1Name\", server1Name.trim())\noutProps.put(\"server2Name\", server2Name.trim())"
                },
                "type": "plugin",
                "name": "Trim property whitespaces",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "Create Component",
                "pluginName": "UrbanCode Deploy Components",
                "pluginVersion": 72,
                "properties": {
                    "component": "Server - ${p:Trim property whitespaces\/server1Name}",
                    "description": "",
                    "template": "WebSphere - Server Config",
                    "templateVersion": "",
                    "sourceConfig": "None",
                    "defaultVersionType": "Full",
                    "importAutomatically": "false",
                    "useVfs": "false",
                    "sourceConfigProps": ""
                },
                "type": "plugin",
                "name": "Create Server Component for cluster member 1",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "Check If Component Exists",
                "pluginName": "UrbanCode Deploy Components",
                "pluginVersion": 72,
                "properties": {"component": "Server - ${p:Trim property whitespaces\/server2Name}"},
                "type": "plugin",
                "name": "Check If Server Component for cluster member 2 exists",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "Create Component",
                "pluginName": "UrbanCode Deploy Components",
                "pluginVersion": 72,
                "properties": {
                    "component": "Server - ${p:Trim property whitespaces\/server2Name}",
                    "description": "",
                    "template": "WebSphere - Server Config",
                    "templateVersion": "",
                    "sourceConfig": "None",
                    "defaultVersionType": "Full",
                    "importAutomatically": "false",
                    "useVfs": "false",
                    "sourceConfigProps": ""
                },
                "type": "plugin",
                "name": "Create Server Component for cluster member 2",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "workingDir": "${p:GetInfo\/outputDirServer1Abs}",
                "commandName": "Create Version",
                "pluginName": "UrbanCode Deploy Versions",
                "pluginVersion": 66,
                "properties": {
                    "componentName": "Server - ${p:server1Name}",
                    "versionName": "${p:GetInfo\/datetime}",
                    "uploadFiles": "true",
                    "includes": "**\/*",
                    "excludes": "",
                    "saveFileExecuteBits": "false"
                },
                "type": "plugin",
                "name": "Create Cluster Member 1 component version",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "workingDir": "${p:GetInfo\/outputDirServer2Abs}",
                "commandName": "Create Version",
                "pluginName": "UrbanCode Deploy Versions",
                "pluginVersion": 66,
                "properties": {
                    "componentName": "Server - ${p:server2Name}",
                    "versionName": "${p:GetInfo\/datetime}",
                    "uploadFiles": "true",
                    "includes": "**\/*",
                    "excludes": "",
                    "saveFileExecuteBits": "false"
                },
                "type": "plugin",
                "name": "Create Cluster Member 2 component version",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "WebSphere - Templatize Cluster Configuration Data",
                "pluginName": "WAS - Configure",
                "pluginVersion": 22,
                "properties": {
                    "clusterName": "${p:clusterName}",
                    "outputDir": "${p:outputDirString}",
                    "useMultiplicity": "false",
                    "discoveryRunOnCluster": "true",
                    "configFile": "${p:clusterConfigFile}",
                    "cellName": "${p:cellName}"
                },
                "type": "plugin",
                "name": "WebSphere - Templatize Cluster Configuration Data",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "WebSphere - Templatize Server Configuration Data",
                "pluginName": "WAS - Configure",
                "pluginVersion": 22,
                "properties": {
                    "serverName": "${p:server1Name}",
                    "sourceNodeName": "${p:nodeName}",
                    "outputDir": "${p:outputDirServer1}",
                    "discoveryRunOnServer": "true",
                    "configFile": "${p:server1ConfigFile}",
                    "cellName": "${p:cellName}",
                    "nodeHostName": "${p:nodeHostName}"
                },
                "type": "plugin",
                "name": "WebSphere - Templatize Server Configuration Data",
                "children": []
            },
            {
                "allowFailure": false,
                "useImpersonation": false,
                "showHidden": false,
                "impersonationUseSudo": false,
                "commandName": "WebSphere - Templatize Server Configuration Data",
                "pluginName": "WAS - Configure",
                "pluginVersion": 22,
                "properties": {
                    "serverName": "${p:server2Name}",
                    "sourceNodeName": "${p:nodeName}",
                    "outputDir": "${p:outputDirServer2}",
                    "discoveryRunOnServer": "true",
                    "configFile": "${p:server2ConfigFile}",
                    "cellName": "${p:cellName}",
                    "nodeHostName": "${p:nodeHostName}"
                },
                "type": "plugin",
                "name": "WebSphere - Templatize Server 2 Configuration Data",
                "children": []
            }
        ]
    },
    "properties": [
        {
            "name": "contextType",
            "value": "Resource",
            "description": "",
            "secure": false
        },
        {
            "name": "defaultResourceId",
            "value": "",
            "description": "",
            "secure": false
        },
        {
            "name": "workingDir",
            "value": "${p:resource\/work.dir}\/${p:process.name}",
            "description": "",
            "secure": false
        }
    ],
    "propDefs": [
        {
            "name": "clusterName",
            "label": "Cluster Name",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Name of the Cluster to templatize",
            "placeholder": ""
        },
        {
            "name": "cellName",
            "label": "Cell Name",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Name of the cell the cluster resides on",
            "placeholder": ""
        },
        {
            "name": "outputDirString",
            "label": "Output Directory",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Directory where the Cluster template will be placed when created",
            "placeholder": ""
        },
        {
            "name": "clusterConfigFile",
            "label": "Cluster Configuration File",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Location and name of the file that contains Cluster configuration data",
            "placeholder": ""
        },
        {
            "name": "nodeName",
            "label": "Server's Node Name",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Name of the node the servers to be templatized reside on",
            "placeholder": ""
        },
        {
            "name": "nodeHostName",
            "label": "Server's Node Host Name",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Host name of the Node the servers to be templatized reside on",
            "placeholder": ""
        },
        {
            "name": "server1Name",
            "label": "Server 1 Name",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Name of the first cluster member",
            "placeholder": ""
        },
        {
            "name": "server1ResourcePath",
            "label": "Server 1 Resource Path",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Resource tree path to the first server to be templatized (for example, \/topLevelGroup\/agentName\/cellName\/Nodes\/nodeName\/Servers\/serverName)",
            "placeholder": ""
        },
        {
            "name": "server1ConfigFile",
            "label": "Server 1 Config File",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Location and name of the file that contains Server configuration data",
            "placeholder": ""
        },
        {
            "name": "outputDirServer1",
            "label": "Server 1 Output Directory",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Directory where Server 1's template will be placed when created",
            "placeholder": ""
        },
        {
            "name": "server2Name",
            "label": "Server 2 Name",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Name of the second cluster member",
            "placeholder": ""
        },
        {
            "name": "server2ResourcePath",
            "label": "Server 2 Resource Path",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Resource tree path to the second server to be templatized (for example, \/topLevelGroup\/agentName\/cellName\/Nodes\/nodeName\/Servers\/serverName)",
            "placeholder": ""
        },
        {
            "name": "server2ConfigFile",
            "label": "Server 2 Config File",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Location and name of the file that contains Server 2's configuration data",
            "placeholder": ""
        },
        {
            "name": "outputDirServer2",
            "label": "Server 2 Output Directory",
            "pattern": "",
            "type": "TEXT",
            "value": "",
            "required": false,
            "description": "Directory where Server 2's template will be placed when created",
            "placeholder": ""
        }
    ],
    "teamMappings": []
}